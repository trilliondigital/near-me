# Near Me Backend - Production Environment Template

# Server
NODE_ENV=production
PORT=3000
ALLOWED_ORIGINS=https://your-domain.com,https://admin.your-domain.com

# Database (use managed Postgres in production if possible)
DATABASE_URL=postgresql://nearme_user:strong_password@postgres:5432/nearme_prod
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_NAME=nearme_prod
DATABASE_USER=nearme_user
DATABASE_PASSWORD=strong_password

# Redis
REDIS_URL=redis://:strong_password@redis:6379
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=strong_password

# JWT
# Generate 64+ byte random strings for these
JWT_SECRET=replace-with-64+char-random
JWT_REFRESH_SECRET=replace-with-64+char-random
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=14d

# Security
ENCRYPTION_MASTER_KEY=replace-with-64-hex-characters-256-bit-key
VALID_API_KEYS=nm_live_api_key_1

# External APIs
FOURSQUARE_API_KEY=your-foursquare-prod-key
GOOGLE_PLACES_API_KEY=your-google-places-prod-key
GOOGLE_MAPS_API_KEY=your-google-maps-prod-key

# Push Notifications
# APNs
APNS_TEAM_ID=your-apple-team-id
APNS_KEY_ID=your-apns-key-id
APNS_BUNDLE_ID=com.nearme.app
APNS_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----
APNS_ENVIRONMENT=production

# FCM
FCM_PROJECT_ID=your-firebase-project-id
FCM_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----
FCM_CLIENT_EMAIL=firebase-adminsdk@your-project.iam.gserviceaccount.com
FCM_SERVER_KEY=your-fcm-server-key

# Push Settings
USE_REAL_PUSH_SERVICES=true

# Logging
LOG_LEVEL=info
LOG_FILE=/var/log/nearme/nearme.log

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX=5
SENSITIVE_RATE_LIMIT_MAX=3

# Security Settings
ENABLE_KEY_ROTATION=true
KEY_ROTATION_INTERVAL_HOURS=168
ENABLE_SECURITY_LOGGING=true
ENABLE_BIOMETRIC_AUTH=true
REQUIRE_DEVICE_VERIFICATION=true
ENABLE_CSRF_PROTECTION=true
ENABLE_HELMET_SECURITY=true

# Background Processing
BACKGROUND_PROCESSOR_INTERVAL=5
ENABLE_SNOOZE_PROCESSING=true
ENABLE_MUTE_PROCESSING=true
ENABLE_RETRY_PROCESSING=true
ENABLE_SCHEDULER_PROCESSING=true
ENABLE_CLEANUP=true
CLEANUP_OLDER_THAN_HOURS=24
